manifest {
    description = 'Runs OpenSWATH Pipeline'
    author = 'Patrick Pedrioli'
}

params {
    // General Parameters
    help = false
    target_library = 'Results/easypqpLib/library_targets.pqp'
    library = 'Results/easypqpLib/library.pqp'
    dia_folder = 'Data/DIA'

    // irt_linear_filter parameters
    irt_linear_filter_bins = 10
    irt_linear_filter_peptides = 10

    // irt_nonlinear_filter parameters
    irt_nonlinear_filter_bins = 1000
    irt_nonlinear_filter_peptides = 100

    // openswath parameters
    openswath_swath_windows = 'Params/swaths55.txt'
    openswath_threads = 28

    // Generic pyprophet parameters
    pyprophet_classifier = "XGBoost"	// XGboost or LDA

    // pyprophet_subsample parameters
    pyprophet_subsample_subsample_ratio = 0.5
    
    // pyprophet_learn parameters
    pyprophet_learn_threads = 20

    alignment_score = 0.0001
}


process {
 withName:irt_linear_filter_pqp { container = 'grosenberger/easypqp'}
 withName:irt_nonlinear_filter_pqp { container = 'grosenberger/easypqp'}
 withName:openswath { container = 'grosenberger/openms'}
 withName:pyprophet_subsample { container = 'pyprophet/master'}
 withName:pyprophet_merge { container = 'pyprophet/master'}
 withName:pyprophet_learn { container = 'pyprophet/master'}
 withName:pyprophet_apply { container = 'pyprophet/master'}
 withName:pyprophet_global { container = 'pyprophet/master'}
 withName:pyprophet_backpropagate { container = 'pyprophet/master'}
 withName:tric_prepare { container = 'pyprophet/master'}
 withName:tric_feature_alignment { container = 'grosenberger/msproteomicstools'}
}

docker {
    enabled = true
    sudo = true
    runOptions = '-e LOCAL_USER_ID=$(id -u) -u $(id -u):$(id -g)'
}

executor {
     name = 'local'
     cpus = 28
     memory = '200 GB'
}
